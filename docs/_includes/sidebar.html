<script type="text/javascript">
  $(function(){
    // クリックイベントを追加
    $("ul.dropdown li").click(function(e){
      e.stopPropagation(); // イベントの伝播を止める
      $(this).siblings().find("ul").slideUp(150); // 他のサブメニューを閉じる
      $(this).children("ul").slideToggle(150); // クリックされたメニューのサブメニューを開閉
    });

    // ページ内の他の場所をクリックした時にサブメニューを閉じる
    $('html').click(function() {
      $('ul.dropdown ul').slideUp(150);
    });
  });
</script>

<ul class="dropdown">
{% for item in site.data.navbar %}
  {% if item.submenu %}
    <li>
      <a href="#">{{ item.name }}</a>
      <ul> 
        {% for subitem in item.submenu %}
          <li><a href="{{ subitem.link }}">{{ subitem.subname }}</a></li>
        {% endfor %}
      </ul>
    </li>
  {% else %}
    <li>
      <a href="{{ item.link }}">{{ item.name }}</a>
    </li>
  {% endif %}
{% endfor %}
</ul>